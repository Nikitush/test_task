Данный репозиторий содержит решение тестового задания на позцию Automation QA.
Само условие тестового задания не выложено в репозиторий, дабы его не засветить.
После скачивания репозитория необходимо перейти в папку test_task, выполнить chmod +x run.sh и запустить sudo ./run.sh, после чего пойдёт сборка образа и запуск всего необходимого.
В папке src лежит Dockerfile и исходники тестового сревера, тестового фрэймворка и самих тестов.
Последовательсность такова, что сначала в контейнере собирается и стартует с помощью systemctl тестовый сервер, его исходники в контейнере лежат по пути /opt/test-server.
Потом в папке /opt/test-framework собирается тестовый фрэймворк и вычищается все лишнее, оставляя только нужный venv, от которого будут вызываться тесты.
Далее переходим в папку /opt/tests и запускаем тесты.
По окончании тестов мы переходим в интерактивный режим контейнера, чтобы можно было по нему полазить и посмотреть.
Если мы хотим повторно запустить тесты из папки /opt/tests, то сделать это можно такой командой ../test-framework/venv/bin/python3 -m pytest --host=127.0.0.1 --port=8899 api_test.py.
После того как мы выйдем из контейнера он остановится, удалится, а также удалится собранный образ, образ из которого он собирается(Ubuntu 20.04) удаляться не будет, так как есть вероятность, что он уже используется и удаление может повлечь проблемы.
